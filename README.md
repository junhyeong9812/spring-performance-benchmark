# Spring MVC vs WebFlux Performance Benchmark

Spring Boot 4.0 + Java 25 ê¸°ë°˜ Tomcat MVCì™€ Netty WebFlux ì„±ëŠ¥ ë¹„êµ í”„ë¡œì íŠ¸

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

ì´ í”„ë¡œì íŠ¸ëŠ” ë™ì¼í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ê°€ì§„ ë‘ ê°œì˜ Spring ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í†µí•´:
- **Spring MVC (Tomcat)**: ì „í†µì ì¸ Servlet ê¸°ë°˜ ë™ê¸° ì²˜ë¦¬
- **Spring WebFlux (Netty)**: Reactive ê¸°ë°˜ ë¹„ë™ê¸° ì²˜ë¦¬

ëŒ€ìš©ëŸ‰ íŠ¸ë˜í”½ í™˜ê²½ì—ì„œì˜ ì„±ëŠ¥ ì°¨ì´ë¥¼ ì¸¡ì •í•˜ê³  ë¶„ì„í•©ë‹ˆë‹¤.

## ğŸ›ï¸ í…ŒìŠ¤íŠ¸ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Server PC (A) - Docker Compose                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         Nginx (Reverse Proxy)                         â”‚  â”‚
â”‚  â”‚                              Port: 80                                 â”‚  â”‚
â”‚  â”‚                    /mvc/* â†’ mvc-app:8080                              â”‚  â”‚
â”‚  â”‚                    /webflux/* â†’ webflux-app:8081                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚          â”‚                              â”‚                                   â”‚
â”‚          â–¼                              â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚     mvc-app       â”‚        â”‚   webflux-app     â”‚                        â”‚
â”‚  â”‚   (Container)     â”‚        â”‚   (Container)     â”‚                        â”‚
â”‚  â”‚                   â”‚        â”‚                   â”‚                        â”‚
â”‚  â”‚ CPU: 2 cores      â”‚        â”‚ CPU: 2 cores      â”‚                        â”‚
â”‚  â”‚ Memory: 1GB       â”‚        â”‚ Memory: 1GB       â”‚                        â”‚
â”‚  â”‚ Port: 8080        â”‚        â”‚ Port: 8081        â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚          â”‚                              â”‚                                   â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â”‚                         â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Monitoring Stack                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚  â”‚
â”‚  â”‚  â”‚ Prometheus  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Grafana    â”‚                        â”‚  â”‚
â”‚  â”‚  â”‚ Port: 9090  â”‚              â”‚ Port: 3000  â”‚                        â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â–²
                                    â”‚ HTTP Requests
                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client PC (B) - Load Test                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                              k6                                       â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  k6 run --env TARGET_HOST=<SERVER_IP> scenarios/load-test.js         â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í…ŒìŠ¤íŠ¸ í™˜ê²½ êµ¬ì„±

| êµ¬ì„± ìš”ì†Œ | ìœ„ì¹˜ | ì—­í•  |
|----------|------|------|
| Docker Compose | Server PC (A) | MVC/WebFlux ì•± + ëª¨ë‹ˆí„°ë§ ìŠ¤íƒ |
| Nginx | Server PC (A) | ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ, ë‹¨ì¼ ì§„ì…ì  |
| k6 | Client PC (B) | ë¶€í•˜ ìƒì„± (ì„œë²„ì™€ ë¶„ë¦¬) |

### ë¡œì»¬ í…ŒìŠ¤íŠ¸ (1ëŒ€ PC)
- k6ì—ì„œ `TARGET_HOST=localhost` ë˜ëŠ” `TARGET_HOST=127.0.0.1` ì§€ì •
- Nginx í¬íŠ¸(80)ë¡œ ìš”ì²­

### ì›ê²© í…ŒìŠ¤íŠ¸ (2ëŒ€ PC - ê¶Œì¥)
- Server PCì—ì„œ Docker Compose ì‹¤í–‰
- Client PCì—ì„œ `TARGET_HOST=<SERVER_IP>` ì§€ì •í•˜ì—¬ k6 ì‹¤í–‰

## ğŸ—ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
spring-performance-benchmark/
â”œâ”€â”€ mvc-app/                       # Spring MVC + Tomcat
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ main/
â”‚   â”‚       â”œâ”€â”€ java/
â”‚   â”‚       â”‚   â””â”€â”€ com/benchmark/mvc/
â”‚   â”‚       â”‚       â”œâ”€â”€ MvcApplication.java
â”‚   â”‚       â”‚       â”œâ”€â”€ controller/
â”‚   â”‚       â”‚       â”œâ”€â”€ service/
â”‚   â”‚       â”‚       â””â”€â”€ config/
â”‚   â”‚       â””â”€â”€ resources/
â”‚   â”‚           â””â”€â”€ application.yml
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ build.gradle
â”‚
â”œâ”€â”€ webflux-app/                   # Spring WebFlux + Netty
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ main/
â”‚   â”‚       â”œâ”€â”€ java/
â”‚   â”‚       â”‚   â””â”€â”€ com/benchmark/webflux/
â”‚   â”‚       â”‚       â”œâ”€â”€ WebFluxApplication.java
â”‚   â”‚       â”‚       â”œâ”€â”€ controller/
â”‚   â”‚       â”‚       â”œâ”€â”€ service/
â”‚   â”‚       â”‚       â””â”€â”€ config/
â”‚   â”‚       â””â”€â”€ resources/
â”‚   â”‚           â””â”€â”€ application.yml
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ build.gradle
â”‚
â”œâ”€â”€ common/                        # ê³µí†µ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ main/java/
â”‚   â”‚       â””â”€â”€ com/benchmark/common/
â”‚   â”‚           â”œâ”€â”€ dto/
â”‚   â”‚           â””â”€â”€ util/
â”‚   â””â”€â”€ build.gradle
â”‚
â”œâ”€â”€ docker/                        # Docker ì„¤ì •
â”‚   â”œâ”€â”€ docker-compose.yml         # ì „ì²´ ìŠ¤íƒ (MVC + WebFlux + Monitoring)
â”‚   â”œâ”€â”€ docker-compose.mvc.yml     # MVCë§Œ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ docker-compose.webflux.yml # WebFluxë§Œ í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ nginx/
â”‚       â””â”€â”€ nginx.conf
â”‚
â”œâ”€â”€ monitoring/                    # ëª¨ë‹ˆí„°ë§ ì„¤ì •
â”‚   â”œâ”€â”€ prometheus/
â”‚   â”‚   â””â”€â”€ prometheus.yml
â”‚   â””â”€â”€ grafana/
â”‚       â”œâ”€â”€ provisioning/
â”‚       â”‚   â”œâ”€â”€ dashboards/
â”‚       â”‚   â””â”€â”€ datasources/
â”‚       â””â”€â”€ dashboards/
â”‚
â”œâ”€â”€ load-test/                     # ë¶€í•˜ í…ŒìŠ¤íŠ¸ (Client PCì—ì„œ ì‹¤í–‰)
â”‚   â”œâ”€â”€ k6/
â”‚   â”‚   â”œâ”€â”€ scenarios/
â”‚   â”‚   â”‚   â”œâ”€â”€ smoke-test.js
â”‚   â”‚   â”‚   â”œâ”€â”€ load-test.js
â”‚   â”‚   â”‚   â”œâ”€â”€ stress-test.js
â”‚   â”‚   â”‚   â””â”€â”€ spike-test.js
â”‚   â”‚   â””â”€â”€ lib/
â”‚   â”‚       â””â”€â”€ config.js
â”‚   â””â”€â”€ README.md                  # ë¶€í•˜ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê°€ì´ë“œ
â”‚
â”œâ”€â”€ scripts/                       # ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ server/                    # Server PCìš©
â”‚   â”‚   â”œâ”€â”€ start-all.sh
â”‚   â”‚   â”œâ”€â”€ start-all.bat
â”‚   â”‚   â”œâ”€â”€ start-mvc.sh
â”‚   â”‚   â”œâ”€â”€ start-mvc.bat
â”‚   â”‚   â”œâ”€â”€ start-webflux.sh
â”‚   â”‚   â”œâ”€â”€ start-webflux.bat
â”‚   â”‚   â”œâ”€â”€ stop-all.sh
â”‚   â”‚   â””â”€â”€ stop-all.bat
â”‚   â””â”€â”€ client/                    # Client PCìš©
â”‚       â”œâ”€â”€ run-load-test.sh
â”‚       â”œâ”€â”€ run-load-test.bat
â”‚       â””â”€â”€ README.md
â”‚
â”œâ”€â”€ results/                       # í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì €ì¥
â”‚
â”œâ”€â”€ settings.gradle
â”œâ”€â”€ build.gradle
â””â”€â”€ README.md
```

## ğŸ¯ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### API ì—”ë“œí¬ì¸íŠ¸

| ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… | í…ŒìŠ¤íŠ¸ ëª©ì  |
|-----------|------|------------|
| `GET /mvc/api/simple` | ê°„ë‹¨í•œ JSON ì‘ë‹µ | ê¸°ë³¸ ì²˜ë¦¬ëŸ‰ |
| `GET /mvc/api/delay/{ms}` | ì§€ì—° ì‘ë‹µ | I/O ë°”ìš´ë“œ ì„±ëŠ¥ |
| `GET /mvc/api/cpu/{iterations}` | CPU ì§‘ì•½ì  ê³„ì‚° | CPU ë°”ìš´ë“œ ì„±ëŠ¥ |
| `GET /mvc/api/db/users` | DB ì¡°íšŒ | DB I/O ì„±ëŠ¥ |
| `POST /mvc/api/db/users` | DB ì €ì¥ | ì“°ê¸° ì„±ëŠ¥ |
| `GET /mvc/api/external` | ì™¸ë¶€ API í˜¸ì¶œ | ë„¤íŠ¸ì›Œí¬ I/O |
| `GET /mvc/api/stream` | ëŒ€ìš©ëŸ‰ ìŠ¤íŠ¸ë¦¬ë° | ìŠ¤íŠ¸ë¦¬ë° ì„±ëŠ¥ |

> WebFluxëŠ” `/webflux/api/*` ê²½ë¡œë¡œ ë™ì¼í•œ ì—”ë“œí¬ì¸íŠ¸ ì œê³µ

### ë¶€í•˜ í…ŒìŠ¤íŠ¸ ìœ í˜•

| ì‹œë‚˜ë¦¬ì˜¤ | VUs | ì‹œê°„ | ëª©ì  |
|---------|-----|------|------|
| Smoke Test | 5 | 1ë¶„ | ê¸°ë³¸ ë™ì‘ í™•ì¸ |
| Load Test | 100 | 10ë¶„ | ì¼ë°˜ ë¶€í•˜ ì„±ëŠ¥ |
| Stress Test | 300 | 10ë¶„ | ê³ ë¶€í•˜ í•œê³„ í™•ì¸ |
| Spike Test | 10â†’500â†’10 | 5ë¶„ | ê¸‰ê²©í•œ íŠ¸ë˜í”½ ëŒ€ì‘ |

## ğŸ“Š ì¸¡ì • ì§€í‘œ

### Response Time Percentiles
- P50, P90, P95, P99, Max

### System Metrics
- CPU ì‚¬ìš©ë¥ 
- Memory ì‚¬ìš©ëŸ‰ (Heap/Non-Heap)
- GC íšŸìˆ˜ ë° ì‹œê°„
- ìŠ¤ë ˆë“œ ìˆ˜

### Application Metrics
- Throughput (RPS)
- Error Rate
- Connection Pool ìƒíƒœ

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

| êµ¬ë¶„ | MVC App | WebFlux App |
|------|---------|-------------|
| Framework | Spring Boot 4.0 | Spring Boot 4.0 |
| Java | 25 | 25 |
| Server | Tomcat 11 | Netty |
| DB Client | JDBC / HikariCP | R2DBC |
| HTTP Client | RestClient | WebClient |

### ì¸í”„ë¼
- **Container**: Docker + Docker Compose
- **Reverse Proxy**: Nginx
- **Metrics**: Micrometer + Prometheus
- **Visualization**: Grafana
- **Load Testing**: k6

## ğŸš€ Quick Start

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­

**Server PC (A):**
```bash
# Docker & Docker Compose
docker --version
docker compose version

# Java 25 (ë¹Œë“œìš©)
java -version
```

**Client PC (B):**
```bash
# k6 ì„¤ì¹˜
# macOS
brew install k6

# Windows
choco install k6

# Linux
sudo apt install k6
```

### Step 1: í”„ë¡œì íŠ¸ ë¹Œë“œ (Server PC)

```bash
# Windows
gradlew.bat clean build

# Linux/Mac
./gradlew clean build
```

### Step 2: Docker ì´ë¯¸ì§€ ë¹Œë“œ ë° ì‹¤í–‰ (Server PC)

```bash
# ì „ì²´ ìŠ¤íƒ ì‹¤í–‰ (MVC + WebFlux + Monitoring)
cd docker
docker compose up -d --build

# ë˜ëŠ” ê°œë³„ ì‹¤í–‰
docker compose -f docker-compose.mvc.yml up -d --build
docker compose -f docker-compose.webflux.yml up -d --build
```

### Step 3: ì„œë¹„ìŠ¤ í™•ì¸

| ì„œë¹„ìŠ¤ | URL | ì„¤ëª… |
|--------|-----|------|
| MVC API | http://SERVER_IP/mvc/api/info | MVC ì•± |
| WebFlux API | http://SERVER_IP/webflux/api/info | WebFlux ì•± |
| Prometheus | http://SERVER_IP:9090 | ë©”íŠ¸ë¦­ ìˆ˜ì§‘ |
| Grafana | http://SERVER_IP:3000 | ëŒ€ì‹œë³´ë“œ (admin/admin) |

### Step 4: ë¶€í•˜ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (Client PC)

```bash
# í”„ë¡œì íŠ¸ í´ë¡  (Client PCì—ì„œ)
git clone <repository>
cd spring-performance-benchmark/load-test

# MVC í…ŒìŠ¤íŠ¸
k6 run --env TARGET_HOST=<SERVER_IP> --env APP_TYPE=mvc k6/scenarios/load-test.js

# WebFlux í…ŒìŠ¤íŠ¸
k6 run --env TARGET_HOST=<SERVER_IP> --env APP_TYPE=webflux k6/scenarios/load-test.js
```

### Step 5: ê²°ê³¼ í™•ì¸

- **ì‹¤ì‹œê°„**: Grafana ëŒ€ì‹œë³´ë“œ (http://SERVER_IP:3000)
- **k6 ê²°ê³¼**: í„°ë¯¸ë„ ì¶œë ¥ ë° `results/` ë””ë ‰í† ë¦¬

## ğŸ”§ Docker ë¦¬ì†ŒìŠ¤ ì œí•œ ì„¤ì •

`docker/docker-compose.yml`ì—ì„œ ë¦¬ì†ŒìŠ¤ ì¡°ì •:

```yaml
services:
  mvc-app:
    deploy:
      resources:
        limits:
          cpus: '2'        # CPU ì½”ì–´ ìˆ˜
          memory: 1G       # ë©”ëª¨ë¦¬ ì œí•œ
        reservations:
          cpus: '1'
          memory: 512M
```

## ğŸ“ˆ ì˜ˆìƒ ê²°ê³¼

### I/O ë°”ìš´ë“œ ì›Œí¬ë¡œë“œ
```
WebFlux > MVC (ë™ì¼ ë¦¬ì†ŒìŠ¤ ëŒ€ë¹„ ë†’ì€ ë™ì‹œì„±)
```

### CPU ë°”ìš´ë“œ ì›Œí¬ë¡œë“œ
```
MVC â‰ˆ WebFlux (í° ì°¨ì´ ì—†ìŒ)
```

### ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
```
WebFlux < MVC (ì´ë²¤íŠ¸ ë£¨í”„ íŠ¹ì„±)
```

## ğŸ¤” ê³ ë ¤ì‚¬í•­

1. **ë„¤íŠ¸ì›Œí¬ ë¶„ë¦¬**: Client PCì™€ Server PC ê°„ ë„¤íŠ¸ì›Œí¬ ì§€ì—° ê³ ë ¤
2. **ë¦¬ì†ŒìŠ¤ ê²©ë¦¬**: Dockerë¡œ CPU/Memory ì œí•œí•˜ì—¬ ê³µì •í•œ ë¹„êµ
3. **Warm-up**: í…ŒìŠ¤íŠ¸ ì „ JIT ìµœì í™”ë¥¼ ìœ„í•œ ì›Œë°ì—… í•„ìš”
4. **GC ì˜í–¥**: GC ì„¤ì •ì´ ê²°ê³¼ì— ì˜í–¥ì„ ë¯¸ì¹¨

## ğŸ“Š ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼

### í…ŒìŠ¤íŠ¸ í™˜ê²½

| í•­ëª© | ì‚¬ì–‘ |
|------|------|
| Server PC | Windows, Docker (CPU 2ì½”ì–´, Memory 1GB ì œí•œ) |
| Client PC | Linux (Ubuntu) |
| Java | 25.0.1 |
| Spring Boot | 4.0.0 |
| ë„¤íŠ¸ì›Œí¬ | ë™ì¼ LAN (192.168.55.x) |

---

### Smoke Test ê²°ê³¼ (5 VUs, 1ë¶„)

#### ì‘ë‹µ ì‹œê°„ ë¹„êµ

| ì§€í‘œ | MVC (Tomcat) | WebFlux (Netty) | ì°¨ì´ |
|------|--------------|-----------------|------|
| **avg** | 17.77ms | 39.74ms | MVC 55% ë¹ ë¦„ |
| **min** | 3.26ms | 2.82ms | WebFlux 13% ë¹ ë¦„ |
| **med** | 9.25ms | 10.01ms | ë¹„ìŠ· |
| **p(90)** | 23.53ms | 108.16ms | MVC 78% ë¹ ë¦„ |
| **p(95)** | 51.29ms | 121.61ms | MVC 58% ë¹ ë¦„ |
| **p(99)** | 216.87ms | 168.38ms | WebFlux 22% ë¹ ë¦„ |
| **max** | 216.95ms | 173.12ms | WebFlux 20% ë¹ ë¦„ |

#### ì²˜ë¦¬ëŸ‰ ë¹„êµ

| ì§€í‘œ | MVC (Tomcat) | WebFlux (Netty) |
|------|--------------|-----------------|
| **Total Requests** | 300 | 300 |
| **RPS** | 4.91/s | 4.80/s |
| **Error Rate** | 0.00% | 0.00% |
| **Iterations** | 75 | 75 |

#### ì²´í¬ ê²°ê³¼

| ì²´í¬ í•­ëª© | MVC (Tomcat) | WebFlux (Netty) |
|----------|--------------|-----------------|
| simple: status 200 | âœ… 100% | âœ… 100% |
| simple: response time < 200ms | âš ï¸ 93% (70/75) | âœ… 100% |
| delay: status 200 | âœ… 100% | âœ… 100% |
| cpu: status 200 | âœ… 100% | âœ… 100% |
| db read: status 200 | âœ… 100% | âœ… 100% |

#### ë°ì´í„° ì „ì†¡ëŸ‰

| ì§€í‘œ | MVC (Tomcat) | WebFlux (Netty) |
|------|--------------|-----------------|
| **Data Received** | 844 KB (14 KB/s) | 80 KB (1.3 KB/s) |
| **Data Sent** | 26 KB (426 B/s) | 26 KB (417 B/s) |

---

### ë¶„ì„

#### ë‚®ì€ ë™ì‹œì„± (5 VUs) ê²°ê³¼ í•´ì„

1. **í‰ê·  ì‘ë‹µì‹œê°„**: MVCê°€ ë” ë¹ ë¦„ (17.77ms vs 39.74ms)
    - ë‚®ì€ ë™ì‹œì„±ì—ì„œëŠ” ì „í†µì ì¸ ìŠ¤ë ˆë“œ ê¸°ë°˜ ëª¨ë¸ì´ ì˜¤ë²„í—¤ë“œê°€ ì ìŒ
    - WebFluxì˜ ë¦¬ì•¡í‹°ë¸Œ ìŠ¤íƒ ì´ˆê¸°í™” ë¹„ìš©ì´ ì˜í–¥

2. **ìµœëŒ€/P99 ì‘ë‹µì‹œê°„**: WebFluxê°€ ë” ì•ˆì •ì  (173ms vs 217ms)
    - ê·¹ë‹¨ì  ìƒí™©ì—ì„œ WebFluxê°€ ë” ì˜ˆì¸¡ ê°€ëŠ¥í•œ ì„±ëŠ¥

3. **ë°ì´í„° ì „ì†¡ëŸ‰**: MVCê°€ 10ë°° ë” ë§ìŒ (844KB vs 80KB)
    - ì‘ë‹µ í˜•ì‹ ì°¨ì´ë¡œ ì¸í•œ ê²ƒìœ¼ë¡œ ì¶”ì •

#### ì˜ˆìƒë˜ëŠ” ê³ ë¶€í•˜ ì‹œë‚˜ë¦¬ì˜¤

| ì‹œë‚˜ë¦¬ì˜¤ | ì˜ˆìƒ ìš°ìœ„ | ì´ìœ  |
|---------|----------|------|
| Load Test (100 VUs) | WebFlux | ìŠ¤ë ˆë“œ í’€ í•œê³„ ì—†ìŒ |
| Stress Test (300 VUs) | WebFlux | ë…¼ë¸”ë¡œí‚¹ I/O ì¥ì  |
| Spike Test (500 VUs) | WebFlux | ê¸‰ê²©í•œ ë¶€í•˜ì— ì•ˆì •ì  |

---

### ì¶”ê°€ í…ŒìŠ¤íŠ¸ ì˜ˆì •

- [ ] Load Test (50â†’100 VUs, 10ë¶„)
- [ ] Stress Test (100â†’300 VUs, 10ë¶„)
- [ ] Spike Test (10â†”500 VUs, 6ë¶„)
- [ ] CPU ì§‘ì•½ì  ì—”ë“œí¬ì¸íŠ¸ ì§‘ì¤‘ í…ŒìŠ¤íŠ¸
- [ ] DB I/O ì§‘ì¤‘ í…ŒìŠ¤íŠ¸

---

### Load Test ê²°ê³¼ (100 VUs, 10ë¶„)

#### ì „ì²´ ì„±ëŠ¥ ë¹„êµ

| ì§€í‘œ | MVC (Tomcat) | WebFlux (Netty) | ìŠ¹ì |
|------|--------------|-----------------|------|
| **Total Requests** | 79,760 | 76,184 | MVC |
| **RPS** | **132.66/s** | 126.84/s | MVC (+4.6%) |
| **avg ì‘ë‹µì‹œê°„** | **5.41ms** | 29.4ms | MVC (5.4ë°° ë¹ ë¦„) |
| **med ì‘ë‹µì‹œê°„** | 4.9ms | 4.74ms | ë¹„ìŠ· |
| **p(95)** | **10.37ms** | 105.51ms | MVC (10ë°° ë¹ ë¦„) |
| **p(99)** | **15.31ms** | 108.69ms | MVC (7ë°° ë¹ ë¦„) |
| **max** | 54.13ms | 183.1ms | MVC |
| **Error Rate** | 0% | 0% | ë™ì¼ |

#### ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ ë¹„êµ

| ì§€í‘œ | MVC (Tomcat) | WebFlux (Netty) | ìŠ¹ì |
|------|--------------|-----------------|------|
| **CPU Max** | 19.5% | 33.6% | MVC (42% ì ìŒ) |
| **CPU Mean** | 4.93% | 3.53% | WebFlux |
| **Load Avg Max** | 0.976 | 1.15 | MVC |
| **GC Count** | 4íšŒ | ~20íšŒ | MVC |
| **GC Duration Max** | 4.20ms | 1.25ms | WebFlux |

#### ì—”ë“œí¬ì¸íŠ¸ë³„ p(95) ë¹„êµ

| ì—”ë“œí¬ì¸íŠ¸ | MVC | WebFlux | ìŠ¹ì | ë¹„ê³  |
|-----------|-----|---------|------|------|
| `/api/simple` | 9.62ms | **7.72ms** | WebFlux | ë‹¨ìˆœ ì‘ë‹µ |
| `/api/delay/100` | **9.90ms** | 108.20ms | MVC | âš ï¸ 10ë°° ì°¨ì´ |
| `/api/cpu/5000` | 10.88ms | **9.12ms** | WebFlux | CPU ì§‘ì•½ì  |
| `/api/db/users` | 10.87ms | **8.07ms** | WebFlux | DB ì¡°íšŒ |

#### ì£¼ìš” ë°œê²¬

1. **delay ì—”ë“œí¬ì¸íŠ¸ ì´ìƒ í˜„ìƒ**
    - MVC: 9.90ms (100ms ëŒ€ê¸°ì¸ë° í›¨ì”¬ ë¹ ë¦„)
    - WebFlux: 108.20ms (ì˜ˆìƒëŒ€ë¡œ ~100ms)
    - **ì›ì¸**: MVCì˜ `Thread.sleep()`ì´ ì‹¤ì œë¡œ 100msë¥¼ ê¸°ë‹¤ë¦¬ì§€ ì•ŠëŠ” ê²ƒìœ¼ë¡œ ì¶”ì •
    - ë˜ëŠ” k6 ì¸¡ì • ë°©ì‹ ì°¨ì´

2. **Virtual Threads íš¨ê³¼**
    - Java 21+ Virtual Threads ë•ë¶„ì— MVCë„ ë†’ì€ ë™ì‹œì„± ì²˜ë¦¬ ê°€ëŠ¥
    - ì „í†µì ì¸ ìŠ¤ë ˆë“œ í’€ ë³‘ëª© í˜„ìƒ ì—†ìŒ

3. **WebFlux ê°•ì **
    - ë‹¨ìˆœ ì‘ë‹µ, CPU ì‘ì—…, DB ì¡°íšŒì—ì„œ ì•½ê°„ ìš°ì„¸
    - GC STW ì‹œê°„ì´ ì§§ìŒ (1.25ms vs 4.20ms)
    - í‰ê·  CPU ì‚¬ìš©ë¥ ì´ ë‚®ìŒ

4. **MVC ê°•ì **
    - ì „ì²´ ì²˜ë¦¬ëŸ‰(RPS) ìš°ì„¸
    - ì‘ë‹µì‹œê°„ ì¼ê´€ì„± (p95, p99 ì•ˆì •ì )
    - í”¼í¬ CPU ì‚¬ìš©ë¥  ë‚®ìŒ

## ğŸ“š ì°¸ê³  ìë£Œ

- [Spring Boot 4.0 Release Notes](https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-4.0-Release-Notes)
- [Spring WebFlux Documentation](https://docs.spring.io/spring-framework/reference/web/webflux.html)
- [k6 Documentation](https://k6.io/docs/)
- [Docker Resource Constraints](https://docs.docker.com/config/containers/resource_constraints/)